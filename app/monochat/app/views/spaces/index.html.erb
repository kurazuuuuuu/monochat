<div class="container">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg);">
    <h1>MonoChat Spaces</h1>
    <%= link_to "Logout", logout_path, method: :delete, class: "btn btn-secondary" %>
  </div>

  <% if @notice || flash[:notice] %>
    <div class="alert alert-success mb-md">
      <%= @notice || flash[:notice] %>
    </div>
  <% end %>

  <% if @errors %>
    <div class="alert alert-error mb-md">
      <ul style="margin-left: 1.5rem; margin-bottom: 0;">
        <% @errors.each do |error| %>
          <li><%= error %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with url: spaces_path, method: :post, class: "mb-lg" do |f| %>
    <%= f.submit "+ New Space", class: "btn btn-full" %>
  <% end %>

  <% if @spaces.any? %>
    <div class="spaces-grid">
      <% @spaces.each do |space| %>
        <%= link_to space_path(space.space_uuid), class: "space-card", style: "text-decoration: none; color: inherit;" do %>
          <h3><%= space.space_name %></h3>
          <p class="text-muted" style="font-size: 0.85rem;">
            Created <%= time_ago_in_words(space.created_at) %> ago
          </p>
          <code style="font-size: 0.75rem; background: #f5f5f5; padding: 2px 6px;">
            <%= space.space_uuid[0..7] %>...
          </code>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="alert" style="text-align: center; background-color: #f5f5f5;">
      <p>No spaces yet. Create your first space!</p>
    </div>
  <% end %>
</div>
